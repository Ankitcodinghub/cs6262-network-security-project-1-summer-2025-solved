# cs6262-network-security-project-1-summer-2025-solved
**TO GET THIS SOLUTION VISIT:** [CS6262: Network Security Project 1 Summer 2025 Solved](https://www.ankitcodinghub.com/product/cs6262-network-security-project-1-summer-2025-solved/)


---

📩 **If you need this solution or have special requests:** **Email:** ankitcoding@gmail.com  
📱 **WhatsApp:** +1 419 877 7882  
📄 **Get a quote instantly using this form:** [Ask Homework Questions](https://www.ankitcodinghub.com/services/ask-homework-questions/)

*We deliver fast, professional, and affordable academic help.*

---

<h2>Description</h2>



<div class="kk-star-ratings kksr-auto kksr-align-center kksr-valign-top" data-payload="{&quot;align&quot;:&quot;center&quot;,&quot;id&quot;:&quot;135268&quot;,&quot;slug&quot;:&quot;default&quot;,&quot;valign&quot;:&quot;top&quot;,&quot;ignore&quot;:&quot;&quot;,&quot;reference&quot;:&quot;auto&quot;,&quot;class&quot;:&quot;&quot;,&quot;count&quot;:&quot;1&quot;,&quot;legendonly&quot;:&quot;&quot;,&quot;readonly&quot;:&quot;&quot;,&quot;score&quot;:&quot;5&quot;,&quot;starsonly&quot;:&quot;&quot;,&quot;best&quot;:&quot;5&quot;,&quot;gap&quot;:&quot;4&quot;,&quot;greet&quot;:&quot;Rate this product&quot;,&quot;legend&quot;:&quot;5\/5 - (1 vote)&quot;,&quot;size&quot;:&quot;24&quot;,&quot;title&quot;:&quot;CS6262: Network Security Project 1 Summer 2025 Solved&quot;,&quot;width&quot;:&quot;138&quot;,&quot;_legend&quot;:&quot;{score}\/{best} - ({count} {votes})&quot;,&quot;font_factor&quot;:&quot;1.25&quot;}">

<div class="kksr-stars">

<div class="kksr-stars-inactive">
            <div class="kksr-star" data-star="1" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="2" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="3" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="4" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" data-star="5" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>

<div class="kksr-stars-active" style="width: 138px;">
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
            <div class="kksr-star" style="padding-right: 4px">


<div class="kksr-icon" style="width: 24px; height: 24px;"></div>
        </div>
    </div>
</div>


<div class="kksr-legend" style="font-size: 19.2px;">
            5/5 - (1 vote)    </div>
    </div>
<strong>Table of Contents </strong>

<a href="#_Toc23590">Project 1: Introduction to Penetration Testing………………………………………………………………. 2 </a>

<a href="#_Toc23591">Introduction……………………………………………………………………………………………………………… 3 </a>

<a href="#_Toc23592">Learning Goals………………………………………………………………………………………………………….. 3 </a>

<a href="#_Toc23593">Virtual Machine…………………………………………………………………………………………………………. 4 </a>

<a href="#_Toc23594">Minimum Hardware to Run the Project 1 VM:………………………………………………………………. 4 </a>

<a href="#_Toc23595">Networks………………………………………………………………………………………………………………….. 5 </a>

<a href="#_Toc23596">Networking in Docker…………………………………………………………………………………………….. 5 </a>

<a href="#_Toc23597">Environment Setup:…………………………………………………………………………………………………… 6 </a>

<a href="#_Toc23598">Project Tasks (100 points):………………………………………………………………………………………….. 7 </a>

<a href="#_Toc23599">Setup……………………………………………………………………………………………………………………. 7 </a>

<a href="#_Toc23600">Task 1: Network Scanning (10 points)……………………………………………………………………….. 9 </a>

<a href="#_Toc23601">Task 2: Exploit the Shellshock Vulnerability (20 points)…………………………………………….. 10 </a>

<a href="#_Toc23602">Task 3: Brute Force with Metasploit (25 points)……………………………………………………….. 11 </a>

<a href="#_Toc23603">Introduction to Metasploit……………………………………………………………………………………….. 12 </a>

<a href="#_Toc23604">Task 4: Privilege Escalation (20 points)……………………………………………………………………. 17 </a>

<a href="#_Toc23605">Task 5: Password Cracking (25 points)…………………………………………………………………….. 18 </a>

<a href="#_Toc23606">Background on Using John the Ripper………………………………………………………………………… 18 </a>

<a href="#_Toc23607">Task 5.0 Demonstration of John the Ripper – Not For Credit…………………………………………. 18 </a>

<a href="#_Toc23608">Extra Task 6 – Optional, Not for Credit……………………………………………………………………. 21 </a>

<a href="#_Toc23609">Task 6 Bypass Authentication with HTTP Request Smuggling………………………………………… 22 </a>

<a href="#_Toc23610">Deliverables:…………………………………………………………………………………………………………… 23 </a>

<a href="#_Toc23611">Reminders:……………………………………………………………………………………………………………… 23 </a>

<a href="#_Toc23612">Acknowledgments:………………………………………………………………………………………………….. 24 </a>

<a href="#_Toc23613">Appendix 1 – Resources / Links…………………………………………………………………………………. 24 </a>

<a href="#_Toc23614">Appendix 2 – Running the VM on an ARM-based Mac………………………………………………….. 25 </a>

<a href="#_Toc23615">Emulating x86/x64 on Apple MX Chipset………………………………………………………………… 25 </a>

<a href="#_Toc23616">Disclaimers……………………………………………………………………………………………………………… 26 </a>

<a href="#_Toc23617">Requirements………………………………………………………………………………………………………….. 26 </a>

<a href="#_Toc23618">Obtaining the Virtual Disk Image from the OVA…………………………………………………………… 26 </a>

<a href="#_Toc23619">Creating the Emulated Virtual Machine……………………………………………………………………… 26 </a>

<a href="#_Toc23620">Configuring the Emulated Virtual Machine…………………………………………………………………. 27 </a>

<a href="#_Toc23621">Completing Course Projects via SSH…………………………………………………………………………… 27 </a>

<a href="#_Toc23622">Obtaining the VM’s IP address…………………………………………………………………………………… 28 </a>

<a href="#_Toc23623">Completing Project 1 over SSH………………………………………………………………………………….. 28 </a>

<a href="#_Toc23624">Appendix 3 – VirtualBox Networking………………………………………………………………………….. 29 </a>

<a href="#_Toc23625">NAT Networking………………………………………………………………………………………………………. 29 </a>

<a href="#_Toc23626">Bridged Networking…………………………………………………………………………………………………. 30 </a>

<a href="#_Toc23627">Restarting VM Networking………………………………………………………………………………………… 30 </a>

<a href="#_Toc23628">Forwarding Ports to Your Host…………………………………………………………………………………… 30 </a>

<a href="#_Toc23629">Appendix 4 – VM Troubleshooting…………………………………………………………………………….. 32 </a>

<a href="#_Toc23630">Closing……………………………………………………………………………………………………………………. 33 </a>

&nbsp;

&nbsp;

<h1><a name="_Toc23590"></a>Project 1: Introduction to Penetration Testing</h1>
Summer 2025

Security Warning

This project involves port scanning and the programmatic creation of network attacks and other hacking techniques. Be certain that you always direct attacks at the Docker container ONLY. Accidentally scanning outside your local network could have serious consequences.

&nbsp;

The Docker network is on 172.22.0.0/24 (CIDR notation) in the VM, do not scan other networks!

<ul>
<li>We make such warnings here, in part, so that you avoid unauthorized port scanning. It’s an interesting subject, you can learn more at <a href="https://nmap.org/book/legal-issues.html">https://nmap.org/book/legal-issues.html</a><a href="https://nmap.org/book/legal-issues.html">.</a></li>
<li>These attacks are intended only for the isolated environment of the virtual machine.</li>
<li>Your ISP Terms of Service likely ban unauthorized (or any) port scanning, don’t port scan the Internet.</li>
<li>Never scan a computer that you don’t have explicit, written permission to scan.</li>
</ul>
<h1><a name="_Toc23591"></a>Introduction</h1>
Penetration testing is an important part of ensuring the security of a system. This project introduces some of the common tools used in penetration testing, while also exploring common vulnerabilities (such as Shellshock and bit exploits).

&nbsp;

In this project, you will gain hands-on experience by exploiting a server running inside a Docker container, hosted within a virtual machine (VM). You will better understand the Shellshock vulnerability, how privilege escalation can occur, and how to crack weak passwords — all crucial elements in penetration testing.

On September 24, 2014, a severe vulnerability in Bash, nicknamed Shellshock, was identified. This vulnerability could exploit many systems at the time. In this project, you will gain a better understanding of the Shellshock vulnerability by exploiting it to attack a machine. The objective of this project is to get first-hand experience on this interesting attack, understand how it works, and think about the lessons that we can get out of this attack.

There are Tasks centering on the use of Metasploit and getting a privileged shell on the Docker container. There is also a new optional task, Task 6 HTTP

Smuggling, that we hope students will try, but is not part of the graded project.

<h1><a name="_Toc23592"></a>Learning Goals</h1>
In this project, you will:

<ul>
<li>Learn to use penetration testing apps and techniques in a Linux virtual machine, attacking a vulnerable Docker container.</li>
<li>Perform network reconnaissance to discover open services running inside a containerized environment.</li>
<li>Exploit common web vulnerabilities to gain remote code execution inside the target container.</li>
<li>Use Metasploit to automate attacks and establish shells on the container.</li>
<li>Escalate privileges inside the container by exploiting misconfigured binaries or services.</li>
<li>Crack passwords and recover sensitive files to simulate postexploitation activities.</li>
<li>Document attack steps clearly to demonstrate real-world penetration testing workflows and best practices.</li>
</ul>
&nbsp;

<h1><a name="_Toc23593"></a>Virtual Machine</h1>
For this semester’s project we are releasing a new virtual machine (VM). It’s x86based, using Xubuntu 24.04 which uses the xfce user interface. This is done to require less processing power than the Gnome-based full Ubuntu release for graphical user interface (GUI) users.

One GUI note about <strong>xfce</strong>, if you try to grab the lower corners of windows it’s hard to grab and resize diagonally. It’s much easier to grab and drag the upper corners of windows.

<h3><a name="_Toc23594"></a>Minimum Hardware to Run the Project 1 VM:</h3>
We expect some people to run the VM on older CPUs. There’s no hard line of what the minimum specification is, these are guidelines, your experience may vary:

<ul>
<li>Intel 8th Gen (Coffee Lake, 2017/2018) or newer, because…</li>
<li>8th generation chips better support virtualization than previous gen chips.</li>
<li>At least <strong>4 logical cores</strong> (e.g., quad-core CPU or dual-core with hyper-threading).</li>
<li><strong>4 GB RAM</strong> strongly recommended, perhaps could run on 3GB, not less.</li>
<li>SSD strongly recommended for increased performance.</li>
<li>Host OS must support virtualization (e.g., VT-x enabled in BIOS).</li>
<li>VirtualBox (or other virtualization software) must be up to date.</li>
</ul>
If you are trying to use our x86-based VM under emulation on an ARM-based Mac, then you should NOT expect to be able to use the xfce-based GUI environment. It might work, but it will be very slow. Instead, ARM-based VM users will be using ssh to access the services needed on the VM.

We only provide limited support here, M-based Macs are not a supported platform for CS 6262. Please see Appendix 2 for instructions on how to attempt to make this work on an ARM-based Mac.

<h1><a name="_Toc23595"></a>Networks</h1>
For your convenience we have opened port 22 on the VM. The VM runs the openssh server. In VirtualBox, you can set up Port Forwarding, see Appendix 2 for information. Once you set up port forwarding of the VM port 22 to your chosen port on your host, you can simply use <strong>ssh localhost:chosen_port_number</strong> to login to the VM from your host.

Because we have opened the ssh port on the VM, the VM is only as secure as your network. In theory, your typical home network has a router that uses Network Address Translation and blocks all incoming ports from incoming connections from the outside world. This means in theory, assuming that your router isn’t hacked, attackers on the Internet can try to attack your routers WAN IP Address, but the router will rebuff any connection that wasn’t originated in your network. Also in theory, your ISP is doing something to block these attacks, but some will get through.

The minute you open a port on your router for your favorite game, you have just opened a can of worms. We strongly recommend you turn the port forwarding on your router OFF while working on this project. Having said that, we also recommend you turn it off all the time.

Consider where the instructions tell you to access the vulnerable website at the target IP address and vulnerable target port. In the VM you would enter the IP address of the Docker container and the port number together into the browser.

Instead, if you are logged in from your host, you have to consider what networking style you are using in Virtual Box (or your choice of virtualization software. You may need to use Bridged networking, see Appendix 3.

Once you set up forwarding, the vulnerable web server port is available on the port you choose on your host. The IP address will be different. We forward the target webserver port on the Docker container to the VM itself. Thus, it’s possible to use the VM’s localhost address followed by the target port number to access the vulnerable website like: <a href="http://localhost:9999/">http://localhost:9999</a>.

See Appendix 3 for more information about two popular VirtualBox networking styles and other VirtualBox information.

<h2><a name="_Toc23596"></a>Networking in Docker</h2>
Relative to the Docker network, remember that the VM has one network interface that talks to your host, and another interface to talk on the Docker network. You’ll see more about this in the details of Task 2. The Docker network is 172.22.0.0/24 on this VM. Google CIDR (related to networking) if this notation doesn’t make sense to you, it’s CIDR notation to denote a network with 254 nodes. The VM Docker interface and the Docker container both live in this network address range.

Here we repeat our warning to only use nmap or zenmap on the Docker network!

<h1><a name="_Toc23597"></a>Environment Setup:</h1>
&nbsp;

You will be provided a virtual machine (VM) based on Xubuntu 24.04 Linux, preinstalled with necessary tools like Metasploit and John the Ripper. Inside this VM, a Docker container will run, it has various vulnerabilities that you will attack.

Provided Files:

<ul>
<li>CS6262-Release-01.ova: The Virtual Machine image (Ubuntu Linux)</li>
<li>txt: Template for final submission</li>
</ul>
&nbsp;

Steps:

<ol>
<li>Install the latest version of VirtualBox (7.1.8 or newer).</li>
<li>Download the VM ova file from the link on Canvas.</li>
<li>Import the VM ova file into VirtualBox using the Import Appliance menu item.</li>
<li>Start the VM in VirtualBox once it’s done importing, this will take some time.</li>
<li>Ensure that the user <strong>penteststudent</strong> is selected, the VM may have defaulted to <strong>pentest</strong>).</li>
<li>The password is <strong>6262student</strong> and can also be found in Canvas.</li>
<li>Once logged in, from your home directory, run:</li>
</ol>
./StartShockServer.sh

<ol start="8">
<li>The vulnerable container will then be accessible on the Docker network.</li>
<li>For this project, the container address is on the 172.22.0.0/24 network. Important: You are attacking the Docker container, not the VM itself.</li>
</ol>
Note: Once you start the Docker container, it will restart itself if it dies, unless you run the ./StopShockServer.sh script. <strong>&nbsp;</strong>

<h1><a name="_Toc23598"></a>Project Tasks (100 points):</h1>
<h2><a name="_Toc23599"></a>Setup</h2>
The first step in any penetration test is to gather information about the network and servers you’ll be exploiting. In this task, you will perform network scanning and answer a few questions based on your findings. On startup, the shellshockvulnerable container in the VM runs a webserver and listens to multiple ports for incoming messages. It also runs a ssh server.

In the VM logged in as penteststudent, open a Terminal Emulator window.

First, before doing anything else, run the command to start up the Docker container that runs the vulnerable services:

<h4>./StartShockServer.sh</h4>
You should see a message after a few moments that the container has started. While it’s not strictly necessary, when you are shutting down or rebooting the VM, you can run the shutdown command first:

<strong>./StopShockServer.sh </strong>

Now, let’s investigate the network. At the command prompt, enter this command:

<h4>ip a</h4>
You will see the output pictured in Figure 1.

In the output you will see various network interfaces. The important ones are:

<strong>lo</strong> — this is the loopback interface, it refers to the VM itself. It’s the same, effectively, as 0.0.0.0 and 127.0.0.1 (with minor differences).

<strong>enp0s3</strong> — this is the VM interface with your host. If you are trying to ssh into your VM from your host computer, you use this address. You may need Bridged networking for this, see Appendix 2. For Ubuntu24.04, <strong>enp0s3</strong> always seems to be the name chosen for the first interface, instead of the traditional <strong>eth0</strong>.

<strong>docker0</strong> — this is the default Docker network on 172.17.0.0/24, we will not be using it.

<strong>br-a795c89aa411</strong> — this is an important interface, it’s the VM’s interface on the Docker network. From this entry you can see the Docker network is 172.22.0.0/24, note this address as it will come in handy for the next steps. It’s possible the interface will use a different br-xxxx ID, though we wouldn’t expect it to. Here you can see the VM’s Docker address is 172.22.0.1.

&nbsp;

Figure 1 — Output of ip a command shows the different network interfaces’ properties

There’s also (when the container is running) a <strong>veth-xxxx</strong> interface. This is the virtual ethernet interface for the running Docker container. While you could use the IPV6 address you see in the output, for this project you should use IPV4 exclusively, don’t use IPV6 addressing.

Now it’s time to get down to the tasks:

<h2><a name="_Toc23600"></a>Task 1: Network Scanning (10 points)</h2>
Find the IP address of the vulnerable Docker container on the NAT network using <strong>nmap</strong> or <strong>zenmap</strong> (the GUI version of nmap). You’ll find both installed in the VM, ignore any GTK errors if you run zenmap from the command line.

Remember to limit your scans to the 172.22.0.0/24 network and nodes on that network only! Don’t scan outside the Docker network!

IMPORTANT: For people who are logging into the VM using ssh to do their work, we have forwarded ports from the Docker container to the VM so you can complete the port forwarding in VirtualBox on your host.

You will see ports exposed on 172.22.0.1, the VM. These simply reflect the ports on the actual Docker container, so you can ignore ports on this address when answering questions in the assignment_questionnaire.txt.

NOTE: You have zenmap on the GUI menu to use, it’s more intuitive to use than the command line version. It will complain that it’s not run as root, that’s OK.

Use an Intense scan in zenmap to identify all the open ports on the Docker container’s webserver and submit the port numbers which handle http traffic to the Apache web server and the Python web server on the VM. You can determine the server type in zenmap, and with nmap on the command line with the correct options.

While zenmap scans all ports, nmap by default only scans the top 1000 ports, to scan EVERY port from 1-10000, you need to specify <strong>-p 1-10000</strong> in the nmap command. All the ports you’re looking for are lower than port 10000.

One suggested workflow for zenmap is to do a “quick scan” of the 172.22.0.0/24 network to identify nodes on the network. Then inspect interesting nodes more closely with further, more intense scans.

If you are scanning and not finding web server ports, did you remember to run <strong><em>./StartShockServer.sh</em></strong> in your home directory?

Submit in assignment_questionnaire.txt:

<ul>
<li>The IP address of the vulnerable container in the Docker network. (3 pts.)</li>
<li>The HTTP port number of the container’s Apache2 webserver. (4 pts.)</li>
<li>The HTTP port number of the container’s Python webserver. (3 pts.)</li>
</ul>
<h2><a name="_Toc23601"></a>Task 2: Exploit the Shellshock Vulnerability (20 points)</h2>
In this task, you will launch the Shellshock attack on a remote web server. Many web servers enable Common Gateway Interface (CGI), which is an older method used to generate dynamic content on Web pages and Web applications.

Many CGI programs are written using a shell script. Therefore, before a CGI program is executed, the shell program will be invoked first. This can be triggered by a user from a remote computer, typically using the curl command. To access this CGI program on the Docker container from the VM browser or command line, you need to first make sure you started the Docker container using:

<strong>./StartShockServer.sh.&nbsp; </strong>

Then, you can either use a browser by typing the following URL:

<strong>http://&lt;IP address found in part 1&gt;:&lt;http port found in part 1&gt;/cgi-bin/shellshock.cgi&nbsp; </strong>

or use the following command line program curl to do the same thing:

<h4>$ curl http:// &lt;IP address found in part 1&gt;:&lt;http port found in part 1&gt;/cgi-bin/shellshock.cgi</h4>
For this task, your goal is to launch the attack through this URL with the proper parameters, such that you can achieve something that you cannot do as a normal remote user. You will get a shell directly on the container, without using ssh to login or even knowing a password! For example, once you have a shell, you can directly execute a file on the container or look up information about files located on the container.

When you successfully launch an attack, please execute the <strong>/bin/task2</strong> program (which needs your GT username as the input) inside the VM. It will generate the submission hash for you.

For students that want to verify their work, here’s an example correct input/output for running /usr/bin/task2:

<strong>$ /usr/bin/task2 gburdell3&nbsp; </strong>

<strong>Here is your task2 hash:&nbsp; </strong>

<h4>5732307cf1ef49dd2613e9bbe28dd3e0ea907c28d6c8736faf0c9537c2b 20c5a</h4>
Submit in assignment_questionnaire.txt:

<ul>
<li>The command (with any parameters) you used to exploit the container.</li>
<li>The hash from running /bin/task2.</li>
</ul>
While you’re in a shell and able to inspect the file system, look around /usr/bin for files that start with “task.” Run a <strong>ls -l</strong> on /usr/bin/ and get familiar with the variety of programs found there. One of them is important for Task 4!

NOTE: Keep your shell open for part of Task 3, you need to search the filesystem for two files needed for Task 3.

<h2><a name="_Toc23602"></a>Task 3: Brute Force with Metasploit (25 points)</h2>
&nbsp;

Now that you have established a foothold on the server through Shellshock, you’ve discovered that the /usr/bin/task3 executable is owned by a different user account that has enhanced privileges. To execute this file and complete the challenge, you’ll need to gain access to that user’s account.

During a penetration test, weak credentials remain one of the most common vulnerabilities found in systems. Attackers often exploit this by attempting to authenticate using common username and password combinations. That’s where Metasploit’s brute force capabilities come in.

Metasploit includes powerful auxiliary modules for password attacks, along with extensive wordlists of commonly used usernames and passwords. For this project, we’re going to use Metasploit’s SSH brute force module to identify weak credentials on the Docker container. This will demonstrate how penetration testers systematically identify accounts with poor password hygiene.

Metasploit works by automating login attempts against the SSH service, trying different username and password combinations from predefined wordlists. This is a critical skill for penetration testers, as password spraying and credential stuffing attacks are frequently used in real-world scenarios.

This approach teaches students about:

<ul>
<li>The importance of strong password policies</li>
<li>How automated tools can exploit weak credentials</li>
<li>The built-in wordlists available in security testing frameworks</li>
<li>Real-world attack patterns used by threat actors</li>
</ul>
<h3><a name="_Toc23603"></a>Introduction to Metasploit</h3>
<table width="88">
<tbody>
<tr>
<td width="88">&nbsp;</td>
</tr>
</tbody>
</table>
<ol>
<li>Begin by opening a new terminal on your VM. In the new terminal type:</li>
</ol>
<h5>msfconsole</h5>
After a moment, the Metasploit Framework console (msfconsole) will load. For this project, msfconsole is the main way of accessing Metasploit. While there are other tools and command prompts associated with Metasploit, msfconsole is suitable for the related tasks of this project.

&nbsp;

It may take a little time for Metasploit to load, you are ready when you see the msf6 prompt at the bottom:

&nbsp;

Figure 2 – Metasploit opening screen

The text-art image will likely be different. You can ignore the warning about Metasploit being more than two weeks old.

&nbsp;

Wait a minute for the&nbsp; <strong><u>msf6</u></strong><strong> &gt;</strong> prompt before entering commands.

&nbsp;

<ol start="2">
<li>For this example, we’re going to scan the ports of a host. You can use the results from task 1 to ensure Metasploit is behaving properly. In practice using a Metasploit module solely for the purpose of scanning ports on a host is a little overcomplicated, since nmap can do much more and takes less setup, but this does offer a good introduction to using a Metasploit module.</li>
</ol>
&nbsp;

<ol start="3">
<li>A Metasploit module is the base of any task performed in Metasploit. It consists of Ruby code that is written to perform a certain task (like exploiting a certain vulnerability or scanning a certain kind of system). There are multiple different varieties of modules, but for our purposes we’ll focus on three of them:</li>
</ol>
&nbsp;

<ul>
<li><strong>The Exploit modules: </strong>These are modules written to exploit a certain vulnerability.</li>
<li><strong>The Auxiliary modules:</strong> These are modules written to perform some tasks related to exploiting a system (like scanning). Within the auxiliary modules there are many kinds of modules. We’ll be using the “scanner” modules for this example.</li>
<li><strong>Payloads:</strong> Calling these modules is a little misleading. They are the payloads (for example the shellcode) that are sent within the exploit.</li>
</ul>
&nbsp;

<ol start="4">
<li>First, we must find the correct module. We know it’s scanning the system, so let’s start by searching for “scanner” using the command</li>
</ol>
(in <strong>msfconsole</strong>):

&nbsp;

<h5>search scanner</h5>
&nbsp;

<ol start="5">
<li>Hmm… that’s quite a few results (752 at the time of writing this).</li>
</ol>
&nbsp;

&nbsp;

Figure 3 – Shows 752 results for search scanner command

&nbsp;

The reason there are so many results is that “scanner” is a class of

auxiliary modules (as seen by there being so many modules beginning with “auxiliary/scanner”). So, searching for “scanner” (or “scan”) will give everything at all related to network or vulnerability scanning.

&nbsp;

<ol start="6">
<li>So, we need to narrow our search. One way of doing this is with the “grep” command, which filters the output. (grep is also the commonly-used “find/search” command in Linux when you are searching inside files.) Since we’re looking to scan the ports, let’s try the following command to search for “portscan” within the search results from “scanner”.</li>
</ol>
&nbsp;

<h5>grep portscan search scanner</h5>
&nbsp;

&nbsp;

Figure 4 – Narrowed down results for grep portscan search scanner command

&nbsp;

That seems a little better. Only 7 results. Since we’re scanning for open tcp ports, let’s use: “auxiliary/scanner/portscan/tcp”. To use this metasploit module, you should run the command:

&nbsp;

<h5>use auxiliary/scanner/portscan/tcp</h5>
You will get this response:

<strong>&nbsp;</strong>

Figure 5 – Shows the new prompt with scanner/portscan/tcp

You now see “<strong>auxiliary(scanner/portscan/tcp</strong>)” after the prompt, indicating you are using the auxiliary(scanner/portscan/tcp) module.

<ol start="7">
<li>Now that we’re using the correct module, we must set the correct options. Try running the command <strong>options</strong>. You should see something like this on the next page:</li>
</ol>
&nbsp;

&nbsp;

Figure 6 – Viewing options such as RHOSTS

&nbsp;

While each of the options is marked as required, most of the prefilled values work for our purposes. The only one we need to change is RHOSTS. RHOSTS should be the IP address of the host we want to scan. In this case, you should set it to the IP address of the Docker container, that you found in part 1. You can use the command:

&nbsp;

<h5>set rhosts insert_IP_of_host</h5>
&nbsp;

Now try running <strong>options</strong> again and ensure the RHOSTS option is set to the correct IP address for the Docker container.

&nbsp;

<ol start="8">
<li>Now use the <strong>run</strong> command and you should see the same list of open ports that nmap showed. (While “run” is usually used to run auxiliary exploits, the command “check” and “exploit” are often used to check and run exploit modules.)</li>
</ol>
&nbsp;

<h5>run</h5>
&nbsp;

Now you’ve seen an example of how to use Metasploit. You’ll follow a similar process when exploiting the vulnerability to run <strong>/bin/task3</strong>.

&nbsp;

Make note of the ssh server port found, if you didn’t note it during Task 1.

&nbsp;

Task 3 Assignment:

&nbsp;

<ol>
<li>Research the available Metasploit commands to learn how to brute force a ssh login attack. Remember if there are too many search results you can use Metasploit’s grep command to narrow down results, as you did earlier in the Task 3 practice section above.</li>
<li>When narrowing down the search properly there are only fourteen results to inspect (as of Summer 25). It should be obvious which one to use, if you are unsure try out different attacks! Experiment!</li>
<li>The attack will use files called unix_users.txt and unix_passwords.txt, these files are on the VM, not on the container.</li>
<li>You need to use a Linux command to find these files on the VM so you get the full path to the files – research the Linux <strong>find</strong> command and understand how to specify the search location and set other parameters for your search.</li>
<li>Because <strong>grep -v</strong> is apparently not working on the VM, if you search the <strong>/</strong> (root) directory you will get too many results saying “Permission denied.” Narrow your search down to <strong>/opt</strong>, Metasploit is installed under there.</li>
<li>Once you have the full path to the files, research the available Metasploit commands to figure out how to use those files in your brute force attack.</li>
<li>Find an option to stop the search when a successful login is made, or the process will continue past the login. Set this option as desired.</li>
<li>Set the ssh port to scan to the port you found earlier in the Task 3 Introduction to Metasploit section.</li>
<li>Run the brute force ssh attack once all options are set.</li>
<li>Once the attack is finished you should see something like this:</li>
</ol>
&nbsp;

<ol start="11">
<li>Use the <strong>sessions -i 1</strong> command to enter your running session (use the session number you obtained in Step 10, run the <strong>sessions</strong> command to see all active sessions.</li>
</ol>
&nbsp;

Normally you would allow some amount of time waiting for the ssh attack to complete, as the attack will try every combination of usernames and passwords in the username and password files.

&nbsp;

For convenience we have set up these files to finish very quickly, you won’t have to wait long to get in.

&nbsp;

NOTE: You should keep the reverse shell running after finishing Task 3, as you will need it in Task 4.

&nbsp;

Submit:

<ul>
<li>Exploit module name</li>
<li>Hash from /bin/task3</li>
</ul>
<h2><a name="_Toc23604"></a>Task 4: Privilege Escalation (20 points)</h2>
&nbsp;

Your goal in Task 4 is to upgrade the privilege for your command shell by exploiting a setUID vulnerability. You will run <strong>/bin/task4</strong> with a higher effective user id (euid), not the default user “www-data”. To be clear, you will still see the www-data user and group, but when you run the <strong>id</strong> command, you will also see an “euid” (effective user id) of 0.

&nbsp;

You will learn about various commands in Linux and find one that lets you escalate your privileges.

Assignments:

&nbsp;

NOTE: Remember to keep the shell open from the previous task, or recreate the steps needed to get the shell in Metasploit.

&nbsp;

As a first step, type <strong>id</strong> in your shell. You should see <strong>system_admin</strong> which is your user ID. Now, run <strong>/usr/bin/task4 gt_username</strong>. You will see a permission denied error. That is because <strong>/usr/bin/task4</strong> is configured to allow only a privileged user to run it. Thus, you need to find a way to run <strong>/bin/task4</strong> as a privileged user. A feasible approach is to spawn a shell running as the “root” user and run task4 through it.

&nbsp;

Useful Resource: <a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a>

&nbsp;

You may want to look at the output of <strong>ls -l /usr/bin</strong> for a program which has a higher privilege than the default user and run <strong>/bin/task4 gt_username</strong> in the shell spawned. Also look at the commands featured on the link above.

<ol>
<li>What is the vulnerable program?</li>
<li>What command do you use to spawn a shell with the vulnerable program?</li>
<li>And what is the hash value from running <strong>/bin/task4 your_gt_username</strong>?</li>
</ol>
&nbsp;

Please leave your answers in assignment_questionnaire.txt.

&nbsp;

NOTE: Keep your Task 4 root shell open for Task 5.

<h2><a name="_Toc23605"></a>Task 5: Password Cracking (25 points)</h2>
A valuable part of any penetration test is password cracking. While there may be no known vulnerabilities in a system, a weak password could be just as damaging in allowing an attacker to gain access to a system or view sensitive information once they gain access. We’re going to look at two kinds of weak passwords in this task: passwords that are too short, and passwords that can easily be guessed via password scraping.

<h3><a name="_Toc23606"></a>Background on Using John the Ripper</h3>
Remember you have learned about the Linux <strong>find</strong> command. On the container, there are two password-protected files. <strong>task51.zip</strong> is password-protected with zip, while <strong>task52.gpg</strong> is encrypted with gpg, a common file encryption tool in

Linux. GPG is the open-source version of PGP – Symantec owns PGP. It is typically licensed for a fee.

We already know the developers of this web server are not very security savvy, since they let a shellshock vulnerability plus a setUID exploit give a high privilege shell on their machine. So, chances are they did not pick very secure passwords for these secret files. Your goal in this task is to crack the passwords of these two files using John the Ripper (a popular password cracker) and cewl (a password scraper).

<h3><a name="_Toc23607"></a>Task 5.0 Demonstration of John the Ripper – Not For Credit</h3>
<ol>
<li>Create a simple password hash file:</li>
</ol>
<h5>echo ‘myuser:$1$salty$yYc40qf3j5dc2QNtidPP8/’ &gt; hello.hash</h5>
That hash is:

Username: myuser

Password: password12

Format: MD5-Crypt (–format=md5crypt)

<ol start="2">
<li>Use John to crack it with a wordlist, this command is one line:</li>
</ol>
<strong>john –format=md5crypt -wordlist=/home/penteststudent/rockyou.txt hello.hash </strong>There’s no space between — and wordlist. You will see this output:

<strong>Cracked 1 password hash</strong>

<ol start="3">
<li>View the cracked password:</li>
</ol>
<strong>john –show hello.hash </strong>

The output is:

<h5>myuser:password123</h5>
<h6>Overview</h6>
In this task, you will analyze two password-protected files suspected of containing sensitive content:

<h5>&nbsp;&nbsp;&nbsp; task51.zip&nbsp;&nbsp;&nbsp;&nbsp; task52.gpg</h5>
These files have been encrypted using weak or guessable passwords. Your job is to recover these passwords using password cracking techniques and tools.

To prepare for these tasks, you need to download the files from the Docker container to your VM so you can work on them with John the Ripper tools.

Remember you are using your login from Tasks 3 and 4, this is a Metasploit shell.

<ul>
<li>Remember you know how to use the find command.</li>
<li>Research Metasploit, learn how to download files using a command.</li>
<li>Download the files to your virtual machine file system.</li>
</ul>
Once you download the files from the Docker container, be sure to switch to a VM Terminal where you’re not logged into the container anymore. You do the rest of Task 5 on your VM, not in the Docker environment.

You’ll work with:

<ul>
<li>John the Ripper: a fast and customizable password cracking tool.</li>
<li>zip2john and gpg2john: utilities that convert encrypted files into hash formats John can understand.</li>
<li>cewl: a custom wordlist generator that scrapes words from a webpage.</li>
</ul>
&nbsp;

This task reinforces your ability to:

<ul>
<li>Extract password hashes.</li>
<li>Use wordlists and brute-force strategies.</li>
<li>Investigate contextual clues to guide password generation.</li>
</ul>
<h6>Part 1: Cracking task51.zip</h6>
<ol>
<li>Ensure you’re in the same directory as task51.zip and task52.gpg.</li>
<li>Use zip2john to extract the hash from task51.zip.</li>
</ol>
Hint: This will produce a hash line John can use as input.

<ol start="3">
<li>Run John the Ripper on the hash. Start with incremental mode.</li>
</ol>
Hint: Try using –incremental to perform a brute-force attack.

<ol start="4">
<li>Use the show feature of john to show the password you cracked.</li>
<li>Once you’ve cracked the password, decrypt the ZIP file.</li>
</ol>
Hint: Use the unzip command and supply the recovered password.

<ol start="6">
<li>Inside the ZIP file is an executable file. Run it with:</li>
</ol>
<h5>&nbsp;&nbsp;&nbsp; ./task51.pyc your_gt_username</h5>
Record the output hash in your assignment questionnaire.

<h6>Part 2: Cracking task52.gpg</h6>
<ol>
<li>Use gpg2john to convert task52.gpg into a John-compatible hash. Start with an incremental brute-force attack.</li>
</ol>
Hint: Pay attention to how long this process takes and whether it seems productive.

<ol start="2">
<li>If the incremental method takes too long or fails, consider a more intelligent approach.</li>
</ol>
Ask yourself:

<ul>
<li>Have the developers shown any patterns of weak security elsewhere?</li>
<li>Could clues about the password be hidden in related web content?</li>
</ul>
&nbsp;

<ol start="3">
<li>Investigate the shellshock.cgi page in your browser and follow any links that might reveal details about the file authors. Look for proper nouns, usernames, or personal information that could be password seeds.</li>
<li>Use <strong>cewl</strong> to generate a wordlist from this webpage.</li>
</ol>
Hint: You may need to configure cewl to follow links to profile pages.

<ol start="5">
<li>Use the generated wordlist with John the Ripper to process your <strong>hash</strong>.</li>
</ol>
Hint: Use the –wordlist option and allow default –rules to permute the words.

<ol start="6">
<li>Use the john command to show the cracked password for <strong>hash</strong></li>
<li>Once cracked, decrypt the GPG file using the password you found. Because Docker can’t do this interactively, you’ll need to use this command with the password as an argument:</li>
</ol>
<h5>gpg –batch –yes –passphrase ‘your_cracked_password’ -output task52 –decrypt task52.gpg</h5>
This command is one line, substitute your cracked password.

<ol start="8">
<li>Run the decrypted script:</li>
</ol>
<h5>./task52 your_gt_username</h5>
Record the resulting hash in your assignment questionnaire.

<h6>What to Submit</h6>
In your assignment_questionnaire.txt, include:

<ul>
<li>The commands you used to run John the Ripper (required).</li>
<li>The command you used to run cewl (required).</li>
<li>The final password for each file (required).</li>
<li>The output of each Python script after entering your GT username (required).</li>
</ul>
&nbsp;

<h2><a name="_Toc23608"></a>Extra Task 6 – Optional, Not for Credit</h2>
We have a new task you can help us test. If you are enjoying attacking the Docker container so far, then you can continue the fun with this task. We would appreciate any feedback on this task for when we incorporate it into the project for future semesters.

We’re not 100% sure we have the HTTP Smuggling vulnerability set up correctly, but you can spend some time researching the weakness. We are running vulnerable Apache2 version 2.4.32.

UPDATE: Hold off working on this unless you want to hack at it, based on student input I don’t think I have a vulnerable version of the Apache2 server on it. I will produce a new VM with the correct server version soon, thanks for your patience.

<h3><a name="_Toc23609"></a>Task 6 Bypass Authentication with HTTP Request Smuggling</h3>
In late 2024 a new Common Vulnerability and Exposure (CVE 2024-40725) came out for the Apache2 web server. The Apache2 server sees widespread use – as of summer, 2025, <a href="https://w3techs.com/technologies/overview/web_server">Apache reportedly</a> had a 15-20% share of the server market. Nginx was the leader, Apache second, Cloudfare Server third and Lightspeed server fourth. Often these different servers are used in combination, with nginx acting as a front end (reverse proxy) for back-end servers that run on Apache2.

In this project Apache not only serves up a site directly, it’s also a reverse proxy for a Python web server. The Python back-end server is configured with these routes:

<ul>
<li>/ — the root of the server is a simple content page that says “Welcome to the Back-end Server”</li>
<li>/protected – a page that you must be authenticated to view, this is the goal, when you get to see this page, you’ll get your flag there.</li>
</ul>
HTTP Request Smuggling is a critical web security vulnerability that occurs when front-end and back-end servers interpret HTTP requests differently. This can allow attackers to bypass security controls and access protected resources.

The Python webserver has a protected administrative area at <strong>/protected</strong> that requires authentication. Your goal is to bypass this authentication and access the protected resource to retrieve your personalized flag.

<h5><em>What You Know </em></h5>
<ul>
<li>The server is running a vulnerable version of Apache2 as a reverse proxy.</li>
<li>There’s a protected area at <strong>/protected</strong> that you cannot access without credentials.</li>
<li>The server has a vulnerability related to how it processes HTTP headers.</li>
<li>You’ll need to include your GT login to get a personalized flag.</li>
</ul>
<h5><em>Hints </em></h5>
<ul>
<li>Research CVE-2024-40725 – a vulnerability in Apache’s proxy module</li>
<li>The vulnerability involves differences in how Content-Length and Transfer-Encoding headers are interpreted.</li>
<li>The proxy forwards requests from /backend/ to the backend server.</li>
<li>You’ll need to “smuggle” a request past Apache’s authentication.</li>
<li>Include the header<strong> X-GT-Login: jsmith3</strong> to get your personalized flag.</li>
</ul>
<h5><em>Getting Started </em></h5>
<ol>
<li>First, try to access the protected area directly:</li>
<li>curl <a href="http://172.22.0.10:8088/admin/">http://172.22.0.10:8088/admin/</a></li>
<li>Notice that it requires authentication that you don’t have.</li>
<li>Try accessing the backend directly through the proxy: <strong>curl </strong><a href="http://172.22.0.10:8088/backend/"><strong>http://172.22.0.10:8088/backend/</strong></a></li>
<li>Also try <strong>curl </strong><a href="http://172.22.0.10:8088/backend/protected"><strong>http://172.22.0.10:8088/backend/protecte</strong></a><strong><u>d</u></strong> and see what happens.</li>
<li>Research how HTTP Request Smuggling works and how to exploit the difference between how Apache and the backend server request parsing.</li>
</ol>
<h1><a name="_Toc23610"></a>Deliverables:</h1>
&nbsp;

Submit to Gradescope:

<ul>
<li>txt (completed)</li>
<li>txt explaining your attack methods</li>
</ul>
&nbsp;

Important:

<ul>
<li>Follow the template exactly. – Do NOT ZIP your files.</li>
</ul>
That’s it, you’re done with Project 1!

<h1><a name="_Toc23611"></a>Reminders:</h1>
<ul>
<li>Only attack the container (172.22.0.10), not the VM itself.</li>
<li>Keep detailed records of all commands used, so you Don’t Repeat Yourself. – Restart the container, if necessary, by running ./StopShockServer.sh and ./StartShockServer.sh in your home directory on the VM.</li>
<li>Be patient when loading Metasploit.</li>
</ul>
<h1><a name="_Toc23612"></a>Acknowledgments:</h1>
This project is adapted from SEED Labs by Wenliang Du, licensed under GNU Free Documentation License, Version 1.2.

<h1><a name="_Toc23613"></a>Appendix 1 – Resources / Links</h1>
Here are some resources for the various concepts and tools presented in the project:

nmap – <a href="https://nmap.org/book/man.html#man-description">https://nmap.org/book/man.html#man-description</a> zenmap – <a href="https://nmap.org/zenmap/">https://nmap.org/zenmap/</a>

&nbsp;

Task 3 – MetaSploit <a href="https://docs.rapid7.com/metasploit/bruteforce-attacks/">https://docs.rapid7.com/metasploit/bruteforce-attacks/</a> <a href="https://www.offsec.com/metasploit-unleashed/scanner-ssh-auxiliary-modules/">https://www.offsec.com/metasploit-unleashed/scanner-ssh-auxiliary-modules/</a>

Task 4 – Root Privilege Escalation Getting a root shell –

<a href="https://gtfobins.github.io/">https://gtfobins.github.io/</a> (compare this list to the output of <strong>ls -l /usr/bin</strong> on the Docker container, once you already have a regular shell. Searching inside the Docker container with <strong>find /usr/bin -perm 4000</strong> doesn’t work as it should, we’re not sure why it doesn’t.) Task 6 – HTTP Request Smuggling –&nbsp; <a href="https://portswigger.net/web-security/request-smuggling">https://portswigger.net/web-security/request-smuggling</a> <a href="https://www.imperva.com/learn/application-security/http-request-smuggling/">https://www.imperva.com/learn/application-security/http-request-smuggling/</a> <a href="https://nvd.nist.gov/vuln/detail/cve-2024-40725">https://nvd.nist.gov/vuln/detail/cve-2024-40725</a> &nbsp;<a href="https://httpd.apache.org/security/vulnerabilities_24.html">https://httpd.apache.org/security/vulnerabilities_24.html</a>

General links:

Shellshock – <a href="https://en.wikipedia.org/wiki/Shellshock_(software_bug)">https://en.wikipedia.org/wiki/Shellshock_(software_bug)</a>

Metasploit – <a href="https://www.offensive-security.com/metasploit-unleashed/">https://www.offensive-security.com/metasploit-unleashed/</a>

John the Ripper – <a href="https://www.openwall.com/john/doc/">https://www.openwall.com/john/doc/</a>

CeWL – <a href="https://tools.kali.org/password-attacks/cewl">https://tools.kali.org/password-attacks/cewl</a>

Webserver Marketshare –

<a href="https://w3techs.com/technologies/overview/web_server">https://w3techs.com/technologies/overview/web_server</a>

<strong>&nbsp;</strong>

<h1><a name="_Toc23614"></a>Appendix 2 – Running the VM on an ARM-based Mac</h1>
&nbsp;

VM Download link: Will be posted on Canvas on the Machine Learning project when we release it.

&nbsp;

Emulation on ARM-based Macs doesn’t always work, it can be very slow. You should use ssh to access the VM using your hosts tools like Terminal, curl and your browser if needed.

&nbsp;

Credit where credit is due, TA Eric Johnson wrote these instructions and we modified them for CS 6262 students for Project 1. We decided to provide some details below on how to configure emulation, but these instructions come without any warranty – we cannot grant extensions due to emulation issues. SHA256:

&nbsp;

Note: None of the material below is necessary for running in VirtualBox on an Intel-based machine, but you can run the VM headless using the same SSH instructions as below:

&nbsp;

<h2><a name="_Toc23615"></a>Emulating x86/x64 on Apple MX Chipset</h2>
While it is possible to use emulation to run the CS6262 VMs it is important to note that it is not officially supported.

&nbsp;

You will need to be familiar with SSH and using the terminal as the Linux GUI is not very responsive. You will find it difficult to impossible to finish the project using the VM GUI.

&nbsp;

<h3><a name="_Toc23616"></a>Disclaimers</h3>
Please understand the teaching assistants (TAs) can provide only very limited support on emulation. You will NOT receive extensions due to technical difficulties with the VM. Using emulation to complete the homework for the class is done at your own risk.

&nbsp;

<h3><a name="_Toc23617"></a>Requirements</h3>
<ol>
<li>A copy of the class VM in .ova format.</li>
<li>An ARM-based Mac.</li>
<li>Install QEMU and UTM on your Mac:</li>
</ol>
Homebrew — <a href="https://www.qemu.org/download/#macos">https://www.qemu.org/download/#macos</a> UTM — <a href="https://mac.getutm.app/">https://mac.getutm.app</a> or other any other emulation tool

<ol start="4">
<li>You need at least 50GB of drive space available, plus free space desired after installation.</li>
</ol>
<h3><a name="_Toc23618"></a>Obtaining the Virtual Disk Image from the OVA</h3>
For the purposes of this tutorial we will use the CS6262Project1-R01.ova name as the VM filename, be sure to adjust the instructions for your VM image name. Note that these instructions were created using a Linux VM and the exact commands may vary slightly on MacOS.

&nbsp;

<ol>
<li>Open a terminal</li>
<li>Download the class VM</li>
<li>Extract the VM disk image from the OVA archive (look for the .vmdk file): tar -xvf CS6262Project1-R01.ova</li>
</ol>
&nbsp;

This will result in this file being created:

CS6262Project1VM-disk002.vmdk

&nbsp;

<ol start="4">
<li>Convert the disk image to qcow2 format</li>
</ol>
qemu-img convert -O qcow2 CS6262Project1VM-disk002.vmdk CS6262Project1VM-disk002.qcow2

<strong>&nbsp;</strong>

<h3><a name="_Toc23619"></a>Creating the Emulated Virtual Machine</h3>
Note these instructions assume that you are using UTM. The instructions will differ if you are not using UTM.

&nbsp;

<ol>
<li>Open the UTM application</li>
<li>Click on the ‘Create a new Virtual Machine’ button</li>
<li>Click on the ‘Emulate’ button</li>
<li>Click on the ‘Other’ button</li>
<li>For ‘Boot Device’ select ‘None’</li>
<li>Click on the ‘Continue’ button</li>
<li>For ‘Architecture’ ensure that ‘x86_64’ is selected</li>
<li>For ‘System’ you can use the default value of ‘Standard PC (Q35 + ICH9, 2009) (alias of pc-q35-7.2)(q35)</li>
<li>Set the ‘Memory’ to ~50% of your total Mac RAM (We recommend 4096MB or more)</li>
<li>For Storage you can use the default of ’64 GB’ – we will be deleting this drive</li>
<li>You do not need to set a shared directory – click ‘Continue’</li>
<li>Set the VM name (CS6262Project1 for example)</li>
<li>Click the ‘Open VM Settings’ checkbox</li>
<li>Click the ‘Save’ button</li>
</ol>
&nbsp;

<h3><a name="_Toc23620"></a>Configuring the Emulated Virtual Machine</h3>
The VM settings window should have opened once you saved the VM. Now you’ll need to configure the VM to use your .qcow2 image to boot the course VM.

&nbsp;

<ol>
<li>Select the ‘QEMU’ menu item on the left</li>
<li>Disable (unselect) the ‘UEFI Boot’ option</li>
<li>Select the ‘Display’ menu item on the left</li>
<li>Set the ‘Emulated Display Card’ to ‘virtio-gpu-gl-pci (GPU Supported)’</li>
<li>Select the ‘IDE Drive’ from the left hand menu</li>
<li>Click the ‘Delete’ button</li>
<li>A prompt will appear asking you to confirm the action – click the ‘Delete’ button</li>
<li>Select ‘New…’ under the ‘Drives’ section in the lefthand menu</li>
<li>A prompt will open – click the ‘Import…’ button</li>
<li>Find your drive image that ends with ‘.qcow2′ for this example</li>
<li>Click the ‘Save’ button in the bottom right of the Settings view</li>
</ol>
&nbsp;

<h3><a name="_Toc23621"></a>Completing Course Projects via SSH</h3>
Given the fact that emulating the Linux UI typically results in poor user experience, the expectation is that you would use SSH to complete all project activities. If you are unable to use SSH to perform a specific task then you’re unlikely to be able to complete the project using an emulated VM.

<h3><a name="_Toc23622"></a>Obtaining the VM’s IP address</h3>
<ol>
<li>Power on the VM</li>
<li>Login to the VM as any user</li>
<li>Wait patiently while the UI loads. You may see a black screen for a long period of time.</li>
<li>Open the ‘Terminal’ application</li>
<li>Query all network interfaces: `ip a`</li>
<li>Find the entry for the VM’s network interface card:</li>
</ol>
Note that it is likely the second interface, denoted by `2:`

The default subnet for UTM is typically `192.168.64.0/24`

2: enp0s1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000 link/ether ee:50:4e:d3:b0:d1 brd ff:ff:ff:ff:ff:ff inet 192.168.64.12/24 brd 192.168.64.255 scope global dynamic noprefixroute enp0s1

&nbsp;

In this example: We will assume that the IP address for the course VM is 192.168.64.12 for the purposes of this example. Your IP address may vary. Please use the address identified above to complete each SSH command.

&nbsp;

<h3><a name="_Toc23623"></a>Completing Project 1 over SSH</h3>
Ensure that you have Chrome installed on your Mac.

Connect to the VM via ssh:

ssh penteststudent@192.168.64.12

&nbsp;

This will get you a bash session running on the VM, presented in your host interface. For portions of the project that can be done from the command line (all of it), use this window. You may want to open a second windows for certain types of attacks, though it isn’t required or necessary.

&nbsp;

If you want to view the project website, then you need port forwarding. You can possibly set this up in UTM/QEMU, the author isn’t sure. You can also use SSH tunneling to forward the vulnerable website to view from your host:

&nbsp;

Ssh -L ssh -L 127.0.0.1:9999:127.0.0.1:9999 <u>penteststudent@192.168.64.12</u>

(note the port 9999 is just an example, use the port you discover with nmap / zenmap)

&nbsp;

We hope you have been able to work your way through these instructions, please let us know of any suggested changed on Ed Discussion.

<h1><a name="_Toc23624"></a>Appendix 3 – VirtualBox Networking</h1>
<h3><a name="_Toc23625"></a>NAT Networking</h3>
If you look at the networking settings in VirtualBox, you’ll see various network styles available. We will look at two of those here: NAT and Bridged.

&nbsp;

Figure 7 – Network Types in VirtualBox

In VirtualBo<a href="https://www.virtualbox.org/manual/ch06.html#network_nat">x </a><a href="https://www.virtualbox.org/manual/ch06.html#network_nat">NAT Networking</a><a href="https://www.virtualbox.org/manual/ch06.html#network_nat">,</a> the VM accesses the Internet through a softwarebased router created by VirtualBox. This is the simplest and default method of networking in VirtualBox. The VM has Internet access, but you typically can’t access the VM from your host. The IP address for the VM will be in the range

10.0.2.0/24.

This networking style is fine if you plan to do all your work in the VirtualBox VM’s GUI. You will be able to work in a shell in the VM and will have full network access from within the VM to the Docker container running in the VM. From the VM you’ll also be able to access the Internet.

This is the safest networking style in VirtualBox, as the VM is not accessible from the network.

<h3><a name="_Toc23626"></a>Bridged Networking</h3>
For those who want to be able to ssh into the VM from their host machine, you’ll want to choos<a href="https://www.virtualbox.org/manual/ch06.html#network_bridged">e </a><a href="https://www.virtualbox.org/manual/ch06.html#network_bridged">Bridged networking</a> in the VM. This promotes the VM to be a full member of your network. This means instead of a 10.0.2.0/24 address, your VM will get an address on your home network. We do not recommend Bridged Networking if you are in a work environment or otherwise exter.

Once you switch to Bridged networking, you should see the IP address of the VM change to be an address on your network, which is typically in the range 192.168.1.0/24 on a home router.

<h3><a name="_Toc23627"></a>Restarting VM Networking</h3>
We have seen behavior in VirtualBox that when you switch between NAT and Bridged networking, the IP address of the VM will not update. In this case, please run the following command in the pentestuser’s home directory:

<strong>./RestartNetworking.sh </strong>

This runs the following commands:

<h4>ip link set enp0s3 down ip link set enp0s3 up</h4>
You can’t normally run these commands as penteststudent, so use the provided script to update your networking on the VM.

<h3><a name="_Toc23628"></a>Forwarding Ports to Your Host</h3>
We might be giving away the game a bit here but it’s OK. As we have noted, the Docker network is on 172.22.0.0/24. It’s easy enough to run <strong>ip a</strong> and discover the VM’s IP address is 172.22.0.1. As noted previously, you will see the Docker container’s ports duplicated on the VM. This is to make them available for port forwarding to your host if you desire to work from your host.

To set up port forwarding, open the VM’s Network settings. You can change network settings while the VM is running.

&nbsp;

Figure 8 – Choose the Network Option

This only works if you’re in NAT networking: you will see a port forwarding button in the VM’s Networking settings:

&nbsp;

Click this button and you’ll see the Port Forwarding Rules dialog appear:

&nbsp;

Click the + icon to create a new rule, under Host Port enter the port you want to use on your host, and under Guest port enter the port numbers the VM’s Docker container is using.

&nbsp;

If you’re already running something on Port 22, for example you run Windows Subsystem for Linux (WSL), then use a different port on the host side. The VM’s ssh is setup on port 22.

This will make the designated ports available on your host’s localhost interface.

You can then run a command like this to ssh into the vm, per the settings above:

<h4>ssh penteststudent@localhost</h4>
You can also access the Docker container’s published ports from localhost. Let’s say you found the Apache 2 server on the container on port 9999. Then you could use this curl command from your host to access the webpage with curl or a browser:

<strong>curl http://localhost:9999 </strong>

<h1><a name="_Toc23629"></a>Appendix 4 – VM Troubleshooting</h1>
&nbsp;

This VM was produced on a Windows machine. If you are on an Intel-based Mac, you may see an error like this when starting the VM:

&nbsp;

In this example we are using a Bridged network, regardless of whether you use NAT or Bridged, to fix this problem choose your eth0 interface in the Network Settings:

&nbsp;

If you can select the adapter type (if it’s not greyed out like here) try different adapters starting with the Intel desktop adapters:

&nbsp;

<h1><a name="_Toc23630"></a>Closing</h1>
Thanks for going through the project. We hope you see by now, while this is a long document, most of it is introductory and background information. We would appreciate any feedback, positive or negative, about out choice to include so much extra information about Docker, Networks and VMs in this document. Did you find it helpful? Was the size of the document so large that it initially discouraged you? Thanks for any feedback, please use the Document Feedback post on Ed to make your comments.

Thank You
